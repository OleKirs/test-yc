---
# file: nat-instance.yml
# Playbook for instance "nat-instance"
- hosts: nat-instance
  gather_facts: false
  vars:
    nginx_user: www-data
    letsencrypt_email: 'ok.digit@ya.ru'
#  become_method:
#    sudo
#  become_user:
#    root
  remote_user:
    yc-user
  roles:
    - role: rproxy_le
      vars:
        domain_name: 'www.gw22.pw'
        rev_proxy_socket: '10.20.0.100:443'
    - role: rproxy_le
      tags: [create_le_cert, site_cfg]
      vars:
        domain_name: 'gitlab.gw22.pw'
        rev_proxy_socket: '10.30.0.50:443'
    - role: rproxy_le
      tags: [create_le_cert, site_cfg]
      vars:
        domain_name: 'grafana.gw22.pw'
        rev_proxy_socket: '10.30.0.200:3000'
    - role: rproxy_le
      tags: [create_le_cert, site_cfg]
      vars:
        domain_name: 'prometeus.gw22.pw'
        rev_proxy_socket: '10.30.0.200:9090'
    - role: rproxy_le
      tags: [create_le_cert, site_cfg]
      vars:
        domain_name: 'alertmanager.gw22.pw'
        rev_proxy_socket: '10.30.0.200:9093'

# _EOF_
